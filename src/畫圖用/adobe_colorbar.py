from matplotlib.colors import ListedColormap
import numpy as np

class Adobe_color_maker:
    
    def __init__(self):
        # 使用 adobe colorbar
        self.colors_rgb = np.array([[  0,   0,   0],
       [  1,   1,   2],
       [  2,   1,   2],
       [  2,   1,   3],
       [  2,   2,   4],
       [  3,   2,   4],
       [  4,   3,   6],
       [  5,   3,   7],
       [  5,   4,   8],
       [  6,   4,   8],
       [  6,   4,   9],
       [  6,   5,  10],
       [  7,   5,  10],
       [  7,   5,  11],
       [  8,   5,  11],
       [  8,   6,  12],
       [  9,   6,  13],
       [  9,   7,  14],
       [ 10,   7,  14],
       [ 10,   7,  15],
       [ 10,   7,  16],
       [ 11,   7,  16],
       [ 11,   7,  17],
       [ 11,   8,  17],
       [ 11,   8,  18],
       [ 12,   8,  18],
       [ 12,   8,  19],
       [ 12,   8,  20],
       [ 13,   8,  20],
       [ 13,   8,  21],
       [ 13,   8,  22],
       [ 14,   8,  22],
       [ 14,   8,  23],
       [ 15,   9,  24],
       [ 15,   9,  25],
       [ 16,   9,  26],
       [ 16,   9,  27],
       [ 17,   9,  28],
       [ 17,   9,  29],
       [ 18,   9,  30],
       [ 18,   9,  31],
       [ 18,   9,  32],
       [ 19,   9,  32],
       [ 19,   9,  33],
       [ 20,   9,  34],
       [ 20,   9,  35],
       [ 21,   9,  36],
       [ 21,   9,  37],
       [ 22,   9,  38],
       [ 22,   9,  39],
       [ 23,   9,  39],
       [ 23,   9,  40],
       [ 23,   9,  41],
       [ 24,   9,  41],
       [ 24,   9,  42],
       [ 25,   8,  43],
       [ 25,   8,  44],
       [ 25,   9,  43],
       [ 26,   8,  45],
       [ 26,   8,  46],
       [ 27,   8,  46],
       [ 27,   8,  47],
       [ 27,   8,  48],
       [ 28,   8,  48],
       [ 28,   8,  49],
       [ 29,   8,  50],
       [ 29,   8,  51],
       [ 30,   8,  51],
       [ 30,   8,  52],
       [ 31,   8,  53],
       [ 32,   8,  54],
       [ 32,   8,  55],
       [ 33,   8,  56],
       [ 34,   8,  57],
       [ 35,   8,  58],
       [ 35,   8,  59],
       [ 36,   7,  60],
       [ 37,   7,  60],
       [ 37,   7,  61],
       [ 38,   7,  62],
       [ 39,   7,  63],
       [ 40,   7,  64],
       [ 41,   7,  65],
       [ 42,   7,  66],
       [ 43,   7,  67],
       [ 44,   7,  68],
       [ 45,   7,  69],
       [ 46,   7,  70],
       [ 47,   7,  71],
       [ 48,   7,  72],
       [ 49,   8,  72],
       [ 50,   8,  73],
       [ 51,   8,  74],
       [ 51,   8,  75],
       [ 52,   8,  75],
       [ 53,   8,  76],
       [ 54,   8,  77],
       [ 55,   8,  77],
       [ 56,   8,  78],
       [ 57,   8,  79],
       [ 58,   9,  80],
       [ 59,   9,  80],
       [ 60,   9,  81],
       [ 62,   9,  82],
       [ 63,   9,  82],
       [ 64,   9,  83],
       [ 65,  10,  83],
       [ 66,  10,  84],
       [ 67,  10,  85],
       [ 68,  10,  85],
       [ 69,  11,  86],
       [ 71,  11,  87],
       [ 73,  12,  88],
       [ 74,  12,  88],
       [ 76,  12,  89],
       [ 77,  13,  89],
       [ 78,  13,  90],
       [ 79,  13,  90],
       [ 81,  14,  91],
       [ 82,  14,  91],
       [ 83,  14,  92],
       [ 85,  15,  92],
       [ 86,  15,  93],
       [ 87,  16,  93],
       [ 89,  16,  94],
       [ 90,  17,  94],
       [ 92,  17,  95],
       [ 93,  18,  95],
       [ 94,  18,  96],
       [ 96,  19,  96],
       [ 97,  19,  96],
       [100,  18,  97],
       [101,  18,  97],
       [102,  17,  97],
       [103,  17,  97],
       [105,  17,  97],
       [106,  16,  97],
       [108,  16,  97],
       [109,  16,  97],
       [110,  15,  97],
       [112,  15,  97],
       [113,  14,  97],
       [114,  14,  97],
       [116,  14,  97],
       [117,  13,  96],
       [119,  13,  96],
       [120,  12,  96],
       [123,  11,  95],
       [126,  10,  95],
       [128,  10,  94],
       [129,   9,  94],
       [131,   9,  93],
       [132,   8,  93],
       [134,   8,  92],
       [136,   7,  92],
       [137,   7,  91],
       [142,   5,  89],
       [144,   5,  88],
       [145,   4,  88],
       [147,   4,  87],
       [150,   2,  85],
       [152,   2,  84],
       [154,   1,  83],
       [155,   1,  82],
       [157,   0,  81],
       [159,   0,  80],
       [160,   0,  79],
       [161,   0,  78],
       [162,   0,  77],
       [163,   0,  76],
       [164,   0,  75],
       [168,   0,  71],
       [172,   0,  66],
       [175,   0,  64],
       [177,   0,  61],
       [179,   0,  58],
       [180,   0,  57],
       [182,   0,  55],
       [184,   0,  53],
       [185,   0,  51],
       [188,   0,  48],
       [191,   0,  44],
       [194,   0,  41],
       [195,   0,  39],
       [197,   0,  36],
       [201,   0,  31],
       [205,   0,  25],
       [210,   0,  18],
       [211,   0,  16],
       [217,   0,   7],
       [218,   0,   5],
       [222,   1,   0],
       [223,   3,   0],
       [227,  10,   0],
       [230,  15,   0],
       [232,  19,   0],
       [236,  26,   0],
       [238,  29,   0],
       [239,  31,   0],
       [243,  38,   0],
       [245,  40,   0],
       [247,  45,   0],
       [249,  48,   0],
       [250,  50,   0],
       [252,  52,   0],
       [254,  57,   0],
       [255,  61,   1],
       [255,  67,   4],
       [255,  70,   5],
       [255,  73,   7],
       [255,  79,   9],
       [255,  85,  12],
       [255,  91,  15],
       [255,  94,  17],
       [255, 100,  20],
       [255, 105,  22],
       [255, 108,  24],
       [255, 111,  25],
       [255, 114,  27],
       [255, 116,  28],
       [255, 119,  30],
       [255, 122,  31],
       [255, 124,  33],
       [255, 127,  34],
       [255, 129,  36],
       [255, 132,  37],
       [255, 134,  39],
       [255, 139,  42],
       [255, 144,  45],
       [255, 146,  47],
       [255, 151,  50],
       [255, 156,  53],
       [255, 158,  54],
       [255, 160,  56],
       [255, 162,  57],
       [255, 164,  59],
       [255, 167,  60],
       [255, 169,  62],
       [255, 171,  64],
       [255, 173,  65],
       [255, 175,  67],
       [255, 179,  70],
       [255, 183,  73],
       [255, 184,  75],
       [255, 186,  76],
       [255, 190,  80],
       [255, 193,  83],
       [255, 195,  84],
       [255, 197,  86],
       [255, 199,  88],
       [255, 202,  91],
       [255, 205,  94],
       [255, 206,  93],
       [255, 207,  93],
       [255, 208,  93],
       [254, 210,  93],
       [255, 211,  93],
       [255, 213,  92],
       [255, 214,  92],
       [255, 215,  92],
       [254, 216,  92],
       [255, 217,  92],
       [255, 218,  92],
       [255, 219,  92],
       [255, 220,  92],
       [254, 221,  92],
       [254, 222,  91],
       [255, 223,  91],
       [255, 224,  91],
       [255, 225,  91],
       [255, 226,  91],
       [255, 227,  91],
       [255, 228,  91],
       [254, 229,  91],
       [255, 230,  91],
       [255, 231,  91],
       [255, 232,  91],
       [255, 233,  91],
       [255, 234,  91],
       [255, 235,  91],
       [255, 236,  91],
       [255, 237,  91],
       [254, 238,  91],
       [254, 239,  91],
       [255, 240,  91]], dtype=np.uint8)
        
    def get_colorbar(self):
        return self._make_cb(self.colors_rgb)
    
    def _make_cb(self, cb):
        assert cb.dtype == np.uint8
        
        return ListedColormap(cb/255.0)
    
    def get_modifiy_cb(self, after=0.5, ratio=2):
        """
        根具原始設定 cb 去做調整 (self.colors_rgb)
        cb_list : color bar， numpy array。
        after: float, 幾%前的color 要做增幅。
        ratio: int, 增幅幾倍。
        """
        res = []

        after_idx = int(len(self.colors_rgb)*after)

        for idx, color in enumerate(self.colors_rgb):
            if idx < after_idx:
                for _ in range(ratio):
                    res.append(color)
            else:
                res.append(color)
                

        return self._make_cb(np.array(res, dtype=self.colors_rgb.dtype))